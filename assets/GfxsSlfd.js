import{d as P,N as T,r as j,k as h,O,o as V,y as m,A as e,G as I,Y as A,Z as M,H as n,a0 as B,I as g,$ as J,B as i,L as K,C as u,E as p,J as L,K as U,z as f,M as z,_ as G,a3 as D,P as F,a1 as R}from"#entry";const W={class:"player-name-settings"},Y={class:"mb-4"},Z={class:"relative"},q={class:"absolute right-3 top-2 text-xs text-gray-400"},Q={key:0,class:"mt-1 text-sm text-red-600"},X={key:1,class:"mt-1 text-sm text-green-600"},ee={class:"mb-4 p-3 bg-gray-50 rounded-lg"},te={class:"flex items-center space-x-3"},se={class:"font-medium text-gray-900"},ne={class:"flex space-x-3"},ae=["disabled"],oe=["disabled"],le={key:0,class:"mt-6"},re={class:"flex flex-wrap gap-2"},ie=["onClick"],de=P({__name:"PlayerNameSettings",props:{currentName:{}},emits:["save","cancel"],setup(H,{emit:S}){const d=H,c=S,_=T(),s=j(d.currentName),x=j(""),r=j(!0),w=h(()=>{try{const a=localStorage.getItem("playerNameHistory");return(a?JSON.parse(a):[]).filter(o=>o!==d.currentName).slice(0,5)}catch{return[]}}),v=h(()=>r.value&&s.value.trim()!==""&&s.value!==d.currentName),y=()=>{const a=_.validatePlayerName(s.value);r.value=a.isValid,x.value=a.error||""},N=()=>{if(!v.value)return;_.updatePlayerName(s.value.trim())&&($(s.value.trim()),c("save",s.value.trim()))},b=()=>{s.value=d.currentName,y()},$=a=>{try{const t=localStorage.getItem("playerNameHistory");let o=t?JSON.parse(t):[];o=o.filter(l=>l!==a),o.unshift(a),o=o.slice(0,10),localStorage.setItem("playerNameHistory",JSON.stringify(o))}catch(t){console.error("保存名称历史失败:",t)}},E=a=>{if(!a)return"?";const t=a.trim();return/^[\u4e00-\u9fa5]/.test(t)?t.charAt(t.length-1):t.charAt(0).toUpperCase()},k=a=>{if(!a)return"#6b7280";let t=0;for(let l=0;l<a.length;l++)t=a.charCodeAt(l)+((t<<5)-t);const o=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)","linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)","linear-gradient(135deg, #ff8a80 0%, #ea6100 100%)","linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)"];return o[Math.abs(t)%o.length]};return O(()=>d.currentName,a=>{s.value=a,y()}),V(()=>{y()}),(a,t)=>{const o=z;return f(),m("div",W,[e("div",Y,[t[1]||(t[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 玩家名称 ",-1)),e("div",Z,[A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>J(s)?s.value=l:null),type:"text",class:g(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-500":n(x),"border-green-500":n(r)&&n(s)!==a.currentName}]),placeholder:"输入您的名称",maxlength:"12",onInput:y,onKeydown:B(N,["enter"])},null,34),[[M,n(s)]]),e("div",q,i(n(s).length)+"/12 ",1)]),n(x)?(f(),m("div",Q,i(n(x)),1)):n(r)&&n(s)!==a.currentName?(f(),m("div",X," 名称可用 ")):I("",!0),t[2]||(t[2]=e("div",{class:"mt-2 text-xs text-gray-500"},[e("p",null,"• 2-12个字符"),e("p",null,"• 不能包含特殊字符"),e("p",null,"• 不能使用敏感词汇")],-1))]),e("div",ee,[t[4]||(t[4]=e("div",{class:"text-sm font-medium text-gray-700 mb-2"},"预览",-1)),e("div",te,[e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",style:K({background:k(n(s)||a.currentName)})},i(E(n(s)||a.currentName)),5),e("div",null,[e("div",se,i(n(s)||a.currentName),1),t[3]||(t[3]=e("div",{class:"text-xs text-gray-500"}," 这就是其他玩家看到的名称 ",-1))])])]),e("div",ne,[e("button",{onClick:N,disabled:!n(v),class:g(["flex-1 py-2 px-4 rounded-lg font-medium transition-colors",n(v)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[u(o,{name:"check",class:"w-4 h-4 mr-2"}),t[5]||(t[5]=p(" 保存名称 ",-1))],10,ae),e("button",{onClick:b,disabled:n(s)===a.currentName,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[u(o,{name:"arrow-left",class:"w-4 h-4"})],8,oe)]),n(w).length>0?(f(),m("div",le,[t[6]||(t[6]=e("div",{class:"text-sm font-medium text-gray-700 mb-2"},"最近使用的名称",-1)),e("div",re,[(f(!0),m(L,null,U(n(w),l=>(f(),m("button",{key:l,onClick:C=>s.value=l,class:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors"},i(l),9,ie))),128))])])):I("",!0)])}}}),ce=G(de,[["__scopeId","data-v-856024ff"]]),ue={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden"},me={class:"flex items-center justify-between p-6 border-b border-gray-200"},ge={class:"text-xl font-semibold text-gray-900 flex items-center"},fe={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},xe={class:"space-y-8"},be={class:"section"},ye={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},pe={class:"section"},ve={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},he={class:"space-y-4"},_e={class:"flex items-center justify-between"},we={class:"flex items-center justify-between"},Ne={class:"flex items-center justify-between"},ke={class:"block text-sm font-medium text-gray-700 mb-2"},Ce={key:0,class:"section"},Se={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},$e={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ee={class:"bg-gray-50 p-3 rounded-lg text-center"},je={class:"text-2xl font-bold text-blue-600"},Ie={class:"bg-gray-50 p-3 rounded-lg text-center"},He={class:"text-2xl font-bold text-green-600"},Pe={class:"bg-gray-50 p-3 rounded-lg text-center"},Te={class:"text-2xl font-bold text-orange-600"},Ve={class:"bg-gray-50 p-3 rounded-lg text-center"},Ae={class:"text-2xl font-bold text-purple-600"},Me={class:"section"},ze={class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},Ge={class:"space-y-3 text-sm text-gray-600"},Oe={class:"flex justify-between"},Be={class:"capitalize"},Je={class:"flex justify-between"},Ke=P({__name:"SettingsPanel",emits:["close","save"],setup(H,{emit:S}){const d=S,c=T(),_=h(()=>c.playerName),s=D({...c.settings}),x=h(()=>c.deviceInfo),r=h(()=>c.playerStats),w=a=>{console.log("名称已保存:",a)},v=()=>{s.soundEnabled=!s.soundEnabled,b()},y=()=>{s.animationEnabled=!s.animationEnabled,b()},N=()=>{s.showCardHints=!s.showCardHints,b()},b=()=>{c.updateSettings(s)},$=()=>{Object.assign(s,{soundEnabled:!0,animationEnabled:!0,autoPlayTimeout:45,showCardHints:!0,theme:"default"}),b(),c.showNotification({type:"success",title:"设置已重置",message:"所有设置已恢复为默认值"})},E=()=>{d("save",s),d("close"),c.showNotification({type:"success",title:"设置已保存",message:"您的设置已成功保存"})},k=a=>{a.key==="Escape"&&d("close")};return V(()=>{window.addEventListener("keydown",k)}),F(()=>{window.removeEventListener("keydown",k)}),(a,t)=>{const o=z,l=ce;return f(),m("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[2]||(t[2]=R(C=>a.$emit("close"),["self"]))},[e("div",ue,[e("div",me,[e("h2",ge,[u(o,{name:"settings",class:"w-6 h-6 mr-2"}),t[3]||(t[3]=p(" 游戏设置 ",-1))]),e("button",{onClick:t[0]||(t[0]=C=>a.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},[u(o,{name:"x",class:"w-5 h-5"})])]),e("div",fe,[e("div",xe,[e("div",be,[e("h3",ye,[u(o,{name:"user",class:"w-5 h-5 mr-2"}),t[4]||(t[4]=p(" 玩家信息 ",-1))]),u(l,{"current-name":n(_),onSave:w},null,8,["current-name"])]),e("div",pe,[e("h3",ve,[u(o,{name:"play",class:"w-5 h-5 mr-2"}),t[5]||(t[5]=p(" 游戏设置 ",-1))]),e("div",he,[e("div",_e,[t[6]||(t[6]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"音效"),e("p",{class:"text-xs text-gray-500"},"开启游戏音效和背景音乐")],-1)),e("button",{onClick:v,class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",n(s).soundEnabled?"bg-blue-600":"bg-gray-200"])},[e("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",n(s).soundEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",we,[t[7]||(t[7]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"动画效果"),e("p",{class:"text-xs text-gray-500"},"开启卡牌和界面动画")],-1)),e("button",{onClick:y,class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",n(s).animationEnabled?"bg-blue-600":"bg-gray-200"])},[e("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",n(s).animationEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Ne,[t[8]||(t[8]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"卡牌提示"),e("p",{class:"text-xs text-gray-500"},"显示可出牌的提示")],-1)),e("button",{onClick:N,class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",n(s).showCardHints?"bg-blue-600":"bg-gray-200"])},[e("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",n(s).showCardHints?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",null,[e("label",ke," 自动托管时间 ("+i(n(s).autoPlayTimeout)+"秒) ",1),A(e("input",{type:"range",min:"15",max:"120",step:"15","onUpdate:modelValue":t[1]||(t[1]=C=>n(s).autoPlayTimeout=C),onChange:b,class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"},null,544),[[M,n(s).autoPlayTimeout]]),t[9]||(t[9]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"15秒"),e("span",null,"60秒"),e("span",null,"120秒")],-1))])])]),n(r)?(f(),m("div",Ce,[e("h3",Se,[u(o,{name:"chart-bar",class:"w-5 h-5 mr-2"}),t[10]||(t[10]=p(" 游戏统计 ",-1))]),e("div",$e,[e("div",Ee,[e("div",je,i(n(r).totalGames||0),1),t[11]||(t[11]=e("div",{class:"text-sm text-gray-600"},"总场次",-1))]),e("div",Ie,[e("div",He,i(n(r).wins||0),1),t[12]||(t[12]=e("div",{class:"text-sm text-gray-600"},"胜利",-1))]),e("div",Pe,[e("div",Te,i(n(r).totalGames>0?Math.round((n(r).wins||0)/n(r).totalGames*100):0)+"% ",1),t[13]||(t[13]=e("div",{class:"text-sm text-gray-600"},"胜率",-1))]),e("div",Ve,[e("div",Ae,i(n(r).landlordWins||0),1),t[14]||(t[14]=e("div",{class:"text-sm text-gray-600"},"地主胜利",-1))])])])):I("",!0),e("div",Me,[e("h3",ze,[u(o,{name:"info",class:"w-5 h-5 mr-2"}),t[15]||(t[15]=p(" 关于游戏 ",-1))]),e("div",Ge,[t[18]||(t[18]=e("div",{class:"flex justify-between"},[e("span",null,"版本"),e("span",{class:"font-mono"},"v1.0.0")],-1)),t[19]||(t[19]=e("div",{class:"flex justify-between"},[e("span",null,"更新时间"),e("span",null,"2024-12-19")],-1)),e("div",Oe,[t[16]||(t[16]=e("span",null,"设备类型",-1)),e("span",Be,i(n(x).type),1)]),e("div",Je,[t[17]||(t[17]=e("span",null,"性能评分",-1)),e("span",null,i(n(x).performanceScore)+"/10",1)])])])])]),e("div",{class:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50"},[e("button",{onClick:$,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," 恢复默认 "),e("button",{onClick:E,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 保存设置 ")])])])}}}),Ue=G(Ke,[["__scopeId","data-v-7ef782cf"]]);export{Ue as _,ce as a};
