import{d as M,W as K,k as d,y as a,z as r,A as e,G as h,C as y,M as B,I as b,H as o,B as i,J as L,K as j,L as le,_ as ce,r as S,O as N,o as z,a1 as ie,Y as de,Z as ue,$ as me,a3 as A,a4 as ye,V as ge,N as pe,q as T,e as xe,X as fe,E as _,R as he}from"#entry";import{parseRoomFromUrl as be,generateRoomLink as ve}from"./BoMY4_lC.js";const _e={class:"flex items-center space-x-2 text-sm"},we={class:"flex items-center space-x-1"},ke={key:0,class:"flex items-center space-x-1"},$e={class:"network-indicator"},Ce={key:0,class:"text-xs text-gray-500"},Re=M({__name:"NetworkStatusIndicator",setup(H){const R=K(),n=d(()=>R.status),c=d(()=>R.latency),l=d(()=>R.quality),f=d(()=>{switch(n.value){case"connected":return"å·²è¿æ¥";case"connecting":return"è¿æ¥ä¸­";case"reconnecting":return"é‡è¿ä¸­";case"disconnected":return"å·²æ–­å¼€";default:return"æœªè¿æ¥"}}),v=d(()=>{switch(n.value){case"connected":return"wifi";case"connecting":case"reconnecting":return"spinner";case"disconnected":return"alert-circle";default:return"signal"}}),$=d(()=>{switch(n.value){case"connected":return"text-green-500";case"connecting":case"reconnecting":return"text-yellow-500 animate-spin";case"disconnected":return"text-red-500";default:return"text-gray-400"}}),w=d(()=>{switch(n.value){case"connected":return"text-green-600";case"connecting":case"reconnecting":return"text-yellow-600";case"disconnected":return"text-red-600";default:return"text-gray-500"}}),u=d(()=>{switch(l.value){case"excellent":return 4;case"good":return 3;case"fair":return 2;case"poor":return 1;default:return 0}}),g=d(()=>{switch(l.value){case"excellent":return"bg-green-500";case"good":return"bg-blue-500";case"fair":return"bg-yellow-500";case"poor":return"bg-red-500";default:return"bg-gray-300"}}),p=d(()=>n.value==="connected"),m=d(()=>n.value==="connected"&&c.value>0);return(G,C)=>{const I=B;return r(),a("div",_e,[e("div",we,[y(I,{name:o(v),class:b(["w-4 h-4",o($)])},null,8,["name","class"]),e("span",{class:b(o(w))},i(o(f)),3)]),o(p)?(r(),a("div",ke,[e("div",$e,[(r(),a(L,null,j(4,U=>e("div",{key:U,class:b(["signal-bar",U<=o(u)?"active":"",o(g)]),style:le({height:`${4+U*2}px`})},null,6)),64))]),o(m)?(r(),a("span",Ce,i(o(c))+"ms ",1)):h("",!0)])):h("",!0)])}}}),Ie=ce(Re,[["__scopeId","data-v-7b530dce"]]),Se={class:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg"},Ue={class:"flex items-center space-x-3"},He={class:"relative"},Te={class:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold"},Ne={key:0,class:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center"},Le={class:"flex-1 min-w-0"},je={class:"flex items-center space-x-2"},Me={class:"font-medium text-gray-900 truncate"},Be={key:0,class:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full"},qe={key:1,class:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full"},Pe={class:"flex items-center mt-1"},De={key:0,class:"flex-shrink-0"},ze=M({__name:"PlayerCard",props:{player:{},isHost:{type:Boolean},isCurrentUser:{type:Boolean},canKick:{type:Boolean}},emits:["kick-player"],setup(H){const R=n=>n.charAt(0).toUpperCase();return(n,c)=>{const l=B;return r(),a("div",Se,[e("div",Ue,[e("div",He,[e("div",Te,i(R(n.player.name)),1),n.isHost?(r(),a("div",Ne,[y(l,{name:"star",class:"w-2.5 h-2.5 text-white"})])):h("",!0),e("div",{class:b(["absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white",n.player.isOnline?"bg-green-500":"bg-gray-400"])},null,2)]),e("div",Le,[e("div",je,[e("h3",Me,i(n.player.name),1),n.isCurrentUser?(r(),a("span",Be," ä½  ")):h("",!0),n.isHost?(r(),a("span",qe," æˆ¿ä¸» ")):h("",!0)]),e("div",Pe,[y(l,{name:n.player.isReady?"check-circle":"clock",class:b(["w-4 h-4 mr-1",n.player.isReady?"text-green-500":"text-yellow-500"])},null,8,["name","class"]),e("span",{class:b(["text-sm",n.player.isReady?"text-green-600":"text-yellow-600"])},i(n.player.isReady?"å·²å‡†å¤‡":"å‡†å¤‡ä¸­"),3)])])]),n.canKick?(r(),a("div",De,[e("button",{onClick:c[0]||(c[0]=f=>n.$emit("kick-player",n.player.id)),class:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"è¸¢å‡ºç©å®¶"},[y(l,{name:"x",class:"w-4 h-4"})])])):h("",!0)])}}}),Ge={class:"flex flex-col h-full"},Ee={class:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50"},Ve={key:0,class:"text-center w-full"},Ke={class:"inline-block px-3 py-1 text-xs bg-gray-200 text-gray-600 rounded-full"},Ae={key:0,class:"text-xs text-gray-500 mb-1"},Fe={class:"text-sm"},Oe={key:0,class:"text-center text-gray-500 py-8"},Qe={class:"border-t border-gray-200 p-4"},Je=["disabled"],We=["disabled"],Xe=M({__name:"ChatBox",props:{messages:{},currentUserId:{}},emits:["send-message"],setup(H,{emit:R}){const n=H,c=R,l=S(""),f=S(!1),v=async()=>{const u=l.value.trim();if(!(!u||f.value)){f.value=!0;try{await c("send-message",u),l.value=""}catch(g){console.error("å‘é€æ¶ˆæ¯å¤±è´¥:",g)}finally{f.value=!1}}},$=u=>{const g=new Date(u),p=new Date;return g.toDateString()===p.toDateString()?g.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):g.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},w=()=>{A(()=>{const u=document.querySelector(".overflow-y-auto");u&&(u.scrollTop=u.scrollHeight)})};return N(()=>n.messages.length,()=>{w()}),z(()=>{w()}),(u,g)=>{const p=B;return r(),a("div",Ge,[e("div",Ee,[(r(!0),a(L,null,j(u.messages,m=>(r(),a("div",{key:m.id,class:b(["flex",m.playerId===u.currentUserId?"justify-end":"justify-start"])},[m.type==="system"?(r(),a("div",Ve,[e("span",Ke,i(m.message),1)])):(r(),a("div",{key:1,class:b(["max-w-xs lg:max-w-md px-3 py-2 rounded-lg",m.playerId===u.currentUserId?"bg-primary-500 text-white":"bg-white border border-gray-200"])},[m.playerId!==u.currentUserId?(r(),a("div",Ae,i(m.playerName),1)):h("",!0),e("div",Fe,i(m.message),1),e("div",{class:b(["text-xs mt-1",m.playerId===u.currentUserId?"text-primary-100":"text-gray-400"])},i($(m.timestamp)),3)],2))],2))),128)),u.messages.length===0?(r(),a("div",Oe,[y(p,{name:"chat",class:"w-8 h-8 mx-auto mb-2 text-gray-300"}),g[1]||(g[1]=e("p",{class:"text-sm"},"æš‚æ— æ¶ˆæ¯",-1))])):h("",!0)]),e("div",Qe,[e("form",{onSubmit:ie(v,["prevent"]),class:"flex space-x-2"},[de(e("input",{"onUpdate:modelValue":g[0]||(g[0]=m=>me(l)?l.value=m:null),type:"text",placeholder:"è¾“å…¥æ¶ˆæ¯...",maxlength:"200",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:o(f)},null,8,Je),[[ue,o(l)]]),e("button",{type:"submit",disabled:!o(l).trim()||o(f),class:"btn btn-primary px-4"},[y(p,{name:o(f)?"spinner":"send",class:b(["w-4 h-4",{"animate-spin":o(f)}])},null,8,["name","class"])],8,We)],32)])])}}}),Ye={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},Ze={class:"bg-white shadow-sm border-b"},et={class:"max-w-4xl mx-auto px-4 py-4"},tt={class:"flex items-center justify-between"},st={class:"text-center"},ot={class:"text-xl font-semibold text-gray-800"},nt={class:"max-w-4xl mx-auto px-4 py-8"},rt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},at={class:"lg:col-span-2 space-y-6"},lt={class:"card"},ct={class:"card-header flex items-center justify-between"},it={class:"text-lg font-semibold flex items-center"},dt={class:"flex items-center space-x-2"},ut={class:"card-body"},mt={class:"space-y-4"},yt={class:"text-center"},gt={class:"room-code inline-block"},pt={class:"mt-2 space-x-2"},xt={class:"grid grid-cols-2 gap-4 text-sm"},ft={class:"flex justify-between"},ht={class:"font-medium"},bt={class:"flex justify-between"},vt={class:"font-medium"},_t={class:"flex justify-between"},wt={class:"card"},kt={class:"card-header"},$t={class:"text-lg font-semibold flex items-center"},Ct={class:"card-body"},Rt={class:"space-y-3"},It={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center mr-3"},St={class:"space-y-6"},Ut={class:"card"},Ht={class:"card-header"},Tt={class:"text-lg font-semibold flex items-center"},Nt={class:"card-body p-0"},Lt={class:"card"},jt={class:"card-body space-y-4"},Mt={key:0,class:"text-xs text-gray-500 p-2 bg-gray-100 rounded"},Bt={key:1,class:"text-center"},qt=["disabled"],Pt=["disabled"],Dt={key:2,class:"space-y-3"},zt=["disabled"],Gt={class:"text-sm text-gray-600 text-center space-y-1"},Et={key:0,class:"text-green-600 font-medium"},Vt={key:1,class:"text-orange-600"},Kt={key:2},At={class:"pt-4 border-t border-gray-200"},Ft={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ot={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},Qt={class:"flex items-center justify-between mb-4"},Jt={class:"space-y-4"},Wt={class:"flex"},Xt=["value"],Yt={class:"text-center"},Zt={class:"inline-block p-4 bg-white border-2 border-gray-200 rounded-lg"},es={class:"flex justify-end mt-6"},os=M({__name:"[code]",setup(H){const n=ye().params.code,c=ge(),l=pe(),f=K(),v=S(!1),$=S(!1),w=S(!1),u=S(),g=S(""),p=d(()=>c.players),m=d(()=>c.hostPlayer),G=d(()=>c.currentUser),C=d(()=>l.playerId),I=d(()=>{const s=C.value&&m.value&&C.value===m.value.id,t=c.isHost;return console.log("æˆ¿é—´é¡µé¢ - isHoståˆ¤æ–­:",{currentUserId:C.value,hostId:m.value?.id,isHostByUserId:s,storeIsHost:t,finalResult:s||t}),s||t}),U=d(()=>c.chatMessages),q=d(()=>f.latency),P=d(()=>p.value.length<3?"waiting":p.value.filter(t=>!t.isHost).every(t=>t.isReady)?"ready":"preparing"),F=d(()=>{switch(P.value){case"waiting":return"ç­‰å¾…ç©å®¶";case"ready":return"å‡†å¤‡å°±ç»ª";case"preparing":return"å‡†å¤‡ä¸­";default:return"æœªçŸ¥çŠ¶æ€"}}),D=d(()=>c.canStartGame),O=d(()=>{const s=p.value.filter(t=>!t.isHost).length;return console.log("éæˆ¿ä¸»ç©å®¶æ•°é‡:",s,"æ‰€æœ‰ç©å®¶:",p.value.map(t=>({id:t.id,name:t.name,isHost:t.isHost}))),s}),Q=d(()=>{const s=p.value.filter(t=>!t.isHost&&t.isReady).length;return console.log("å·²å‡†å¤‡çš„éæˆ¿ä¸»ç©å®¶æ•°é‡:",s),s}),J=d(()=>!1),E=async()=>{if(!v.value){v.value=!0;try{await c.toggleReady()}catch(s){console.error("åˆ‡æ¢å‡†å¤‡çŠ¶æ€å¤±è´¥:",s),l.showNotification({type:"error",title:"æ“ä½œå¤±è´¥",message:"æ— æ³•åˆ‡æ¢å‡†å¤‡çŠ¶æ€ï¼Œè¯·é‡è¯•"})}finally{v.value=!1}}},W=async()=>{if(!(!D.value||$.value)){$.value=!0;try{await c.startGame(),await T("/game")}catch(s){console.error("å¼€å§‹æ¸¸æˆå¤±è´¥:",s),l.showNotification({type:"error",title:"å¯åŠ¨å¤±è´¥",message:"æ— æ³•å¼€å§‹æ¸¸æˆï¼Œè¯·é‡è¯•"})}finally{$.value=!1}}},V=async()=>{if(await l.showConfirmDialog({title:"ç¡®è®¤ç¦»å¼€",message:"ç¡®å®šè¦ç¦»å¼€æˆ¿é—´å—ï¼Ÿ",confirmText:"ç¦»å¼€",cancelText:"å–æ¶ˆ"}))try{await c.leaveRoom(),await T("/")}catch(t){console.error("ç¦»å¼€æˆ¿é—´å¤±è´¥:",t)}},X=async s=>{if(await l.showConfirmDialog({title:"ç¡®è®¤è¸¢å‡º",message:"ç¡®å®šè¦è¸¢å‡ºè¯¥ç©å®¶å—ï¼Ÿ",confirmText:"è¸¢å‡º",cancelText:"å–æ¶ˆ"}))try{await c.kickPlayer(s)}catch(x){console.error("è¸¢å‡ºç©å®¶å¤±è´¥:",x),l.showNotification({type:"error",title:"æ“ä½œå¤±è´¥",message:"æ— æ³•è¸¢å‡ºç©å®¶ï¼Œè¯·é‡è¯•"})}},Y=async s=>{try{await c.sendChatMessage(s)}catch(t){console.error("å‘é€æ¶ˆæ¯å¤±è´¥:",t)}},Z=async()=>{try{await navigator.clipboard.writeText(n),l.showNotification({type:"success",title:"å¤åˆ¶æˆåŠŸ",message:"æˆ¿é—´ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})}catch(s){console.error("å¤åˆ¶å¤±è´¥:",s)}},ee=async()=>{const s=`${window.location.origin}/room/${n}`;if(navigator.share)try{await navigator.share({title:"æ–—åœ°ä¸»æ¸¸æˆé‚€è¯·",text:`æ¥å’Œæˆ‘ä¸€èµ·ç©æ–—åœ°ä¸»å§ï¼æˆ¿é—´ç : ${n}`,url:s})}catch{}else try{await navigator.clipboard.writeText(s),l.showNotification({type:"success",title:"é“¾æ¥å·²å¤åˆ¶",message:"æˆ¿é—´é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})}catch(t){console.error("å¤åˆ¶é“¾æ¥å¤±è´¥:",t)}};z(async()=>{console.log("ğŸ  æˆ¿é—´é¡µé¢æŒ‚è½½å¼€å§‹ï¼Œæˆ¿é—´ç :",n),console.log("ğŸ  å½“å‰URL:",window.location.href),console.log("ğŸ  URL hash:",window.location.hash),console.log("ğŸ  URL search:",window.location.search);try{const s=be();s?(console.log("ğŸ  æ£€æµ‹åˆ°åˆ†äº«é“¾æ¥è®¿é—®:",s),s.roomCode!==n&&console.warn("ğŸ  URLæˆ¿é—´ç ä¸è·¯ç”±å‚æ•°ä¸ä¸€è‡´:",{urlRoomCode:s.roomCode,routeRoomCode:n})):console.log("ğŸ  æ™®é€šæˆ¿é—´ç è®¿é—®æˆ–URLè§£æå¤±è´¥"),console.log("ğŸ  å¼€å§‹åŠ å…¥æˆ¿é—´..."),await c.joinRoom(n),console.log("ğŸ  æˆ¿é—´åŠ å…¥æˆåŠŸï¼Œå¼€å§‹ç½‘ç»œç›‘æ§"),f.startMonitoring(),console.log("ğŸ  æˆ¿é—´é¡µé¢åˆå§‹åŒ–å®Œæˆ")}catch(s){console.error("ğŸ  æˆ¿é—´é¡µé¢åˆå§‹åŒ–å¤±è´¥:",s),console.error("ğŸ  é”™è¯¯è¯¦æƒ…:",{name:s instanceof Error?s.name:"Unknown",message:s instanceof Error?s.message:String(s),stack:s instanceof Error?s.stack:void 0}),l.showNotification({type:"error",title:"åŠ å…¥å¤±è´¥",message:`æ— æ³•åŠ å…¥æˆ¿é—´ ${n}ï¼Œ${s instanceof Error?s.message:"è¯·æ£€æŸ¥æˆ¿é—´ç æˆ–ç½‘ç»œè¿æ¥"}`}),console.log("ğŸ  3ç§’åè¿”å›é¦–é¡µ..."),setTimeout(async()=>{console.log("ğŸ  è¿”å›é¦–é¡µ"),await T("/")},3e3)}}),xe(()=>{f.stopMonitoring()}),N(()=>c.gameStarted,s=>{s&&T("/game")}),N(()=>p.value.length,(s,t)=>{t&&s<t&&l.showNotification({type:"info",title:"ç©å®¶ç¦»å¼€",message:"æœ‰ç©å®¶ç¦»å¼€äº†æˆ¿é—´"})}),z(()=>{console.log("æˆ¿é—´é¡µé¢æŒ‚è½½å®Œæˆ"),console.log("roomStore.isHost:",c.isHost),console.log("roomStore.currentUserId:",c.currentUserId),console.log("roomStore.players:",c.players)});const te=async()=>{try{const s={roomCode:n,hostPeerId:C.value,hostName:l.playerName||"æˆ¿ä¸»",timestamp:Date.now()};g.value=ve(s),console.log("ğŸ“¡ ç”Ÿæˆæˆ¿é—´é“¾æ¥:",g.value)}catch(s){console.error("ç”Ÿæˆæˆ¿é—´é“¾æ¥å¤±è´¥:",s),g.value=`${window.location.origin}${window.location.pathname}#/room/${n}`}},se=async()=>{try{await navigator.clipboard.writeText(g.value),l.showNotification({type:"success",title:"å¤åˆ¶æˆåŠŸ",message:"é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})}catch(s){console.error("å¤åˆ¶å¤±è´¥:",s),l.showNotification({type:"error",title:"å¤åˆ¶å¤±è´¥",message:"è¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥"})}},oe=async()=>{if(!(!u.value||!g.value))try{const s=g.value,t=128,x=`https://api.qrserver.com/v1/create-qr-code/?size=${t}x${t}&data=${encodeURIComponent(s)}`;u.value.innerHTML=`<img src="${x}" alt="æˆ¿é—´äºŒç»´ç " class="w-full h-full" />`,console.log("ğŸ“¡ ç”ŸæˆäºŒç»´ç :",x)}catch(s){console.error("ç”ŸæˆäºŒç»´ç å¤±è´¥:",s),u.value&&(u.value.innerHTML='<span class="text-xs text-red-500">äºŒç»´ç ç”Ÿæˆå¤±è´¥</span>')}};return N(w,async s=>{s&&I.value&&(await te(),await A(),await oe())}),fe({title:`æ–—åœ°ä¸»ç½‘æ¸¸ - æˆ¿é—´ ${n}`,description:"ç­‰å¾…ç©å®¶åŠ å…¥ï¼Œå‡†å¤‡å¼€å§‹æ–—åœ°ä¸»æ¸¸æˆ",robots:"noindex, nofollow"}),(s,t)=>{const x=B,ne=Ie,re=ze,ae=Xe;return r(),a("div",Ye,[e("header",Ze,[e("div",et,[e("div",tt,[e("button",{onClick:V,class:"btn btn-secondary flex items-center"},[y(x,{name:"arrow-left",class:"w-4 h-4 mr-2"}),t[3]||(t[3]=_(" è¿”å›å¤§å… ",-1))]),e("div",st,[e("h1",ot," æˆ¿é—´ "+i(o(n)),1),y(ne)]),t[4]||(t[4]=e("div",{class:"w-20"},null,-1))])])]),e("main",nt,[e("div",rt,[e("div",at,[e("div",lt,[e("div",ct,[e("h2",it,[y(x,{name:"home",class:"w-5 h-5 mr-2"}),t[5]||(t[5]=_(" æˆ¿é—´ä¿¡æ¯ ",-1))]),e("div",dt,[o(I)?(r(),a("button",{key:0,onClick:t[0]||(t[0]=k=>w.value=!0),class:"btn btn-primary btn-sm"},[y(x,{name:"share",class:"w-4 h-4 mr-1"}),t[6]||(t[6]=_(" åˆ†äº«æˆ¿é—´ ",-1))])):h("",!0),e("span",{class:b(["px-2 py-1 rounded-full text-xs font-medium",o(P)==="waiting"?"bg-yellow-100 text-yellow-800":o(P)==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"])},i(o(F)),3)])]),e("div",ut,[e("div",mt,[e("div",yt,[e("div",gt,i(o(n)),1),e("div",pt,[e("button",{onClick:Z,class:"btn btn-sm btn-secondary"},[y(x,{name:"copy",class:"w-4 h-4 mr-1"}),t[7]||(t[7]=_(" å¤åˆ¶æˆ¿é—´ç  ",-1))]),e("button",{onClick:ee,class:"btn btn-sm btn-secondary"},[y(x,{name:"share",class:"w-4 h-4 mr-1"}),t[8]||(t[8]=_(" åˆ†äº«é“¾æ¥ ",-1))])])]),e("div",xt,[e("div",ft,[t[9]||(t[9]=e("span",{class:"text-gray-600"},"æˆ¿ä¸»:",-1)),e("span",ht,i(o(m)?.name||"æœªçŸ¥"),1)]),e("div",bt,[t[10]||(t[10]=e("span",{class:"text-gray-600"},"ç©å®¶æ•°:",-1)),e("span",vt,i(o(p).length)+"/3",1)]),t[12]||(t[12]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-600"},"æ¸¸æˆæ¨¡å¼:"),e("span",{class:"font-medium"},"ç»å…¸æ–—åœ°ä¸»")],-1)),e("div",_t,[t[11]||(t[11]=e("span",{class:"text-gray-600"},"ç½‘ç»œå»¶è¿Ÿ:",-1)),e("span",{class:b(["font-medium",o(q)<50?"text-green-600":o(q)<100?"text-yellow-600":"text-red-600"])},i(o(q))+"ms ",3)])])])])]),e("div",wt,[e("div",kt,[e("h2",$t,[y(x,{name:"users",class:"w-5 h-5 mr-2"}),t[13]||(t[13]=_(" ç©å®¶åˆ—è¡¨ ",-1))])]),e("div",Ct,[e("div",Rt,[(r(!0),a(L,null,j(o(p),k=>(r(),he(re,{key:k.id,player:k,"is-host":k.id===o(m)?.id,"is-current-user":k.id===o(C),"can-kick":o(I)&&k.id!==o(C),onKickPlayer:X},null,8,["player","is-host","is-current-user","can-kick"]))),128)),(r(!0),a(L,null,j(3-o(p).length,k=>(r(),a("div",{key:`empty-${k}`,class:"flex items-center p-4 border-2 border-dashed border-gray-300 rounded-lg"},[e("div",It,[y(x,{name:"user-plus",class:"w-5 h-5 text-gray-400"})]),t[14]||(t[14]=e("span",{class:"text-gray-500"},"ç­‰å¾…ç©å®¶åŠ å…¥...",-1))]))),128))])])])]),e("div",St,[e("div",Ut,[e("div",Ht,[e("h3",Tt,[y(x,{name:"chat",class:"w-5 h-5 mr-2"}),t[15]||(t[15]=_(" èŠå¤©å®¤ ",-1))])]),e("div",Nt,[y(ae,{messages:o(U),"current-user-id":o(C),onSendMessage:Y,class:"h-64"},null,8,["messages","current-user-id"])])]),e("div",Lt,[t[18]||(t[18]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold"},"æ¸¸æˆæ§åˆ¶")],-1)),e("div",jt,[o(J)?(r(),a("div",Mt," è°ƒè¯•: isHost="+i(o(I))+", currentUserId="+i(o(C))+", hostId="+i(o(m)?.id),1)):h("",!0),o(I)?h("",!0):(r(),a("div",Bt,[o(G)?.isReady?(r(),a("button",{key:1,onClick:E,disabled:o(v),class:"btn btn-secondary btn-lg w-full"},[y(x,{name:"x",class:"w-5 h-5 mr-2"}),_(" "+i(o(v)?"å–æ¶ˆä¸­...":"å–æ¶ˆå‡†å¤‡"),1)],8,Pt)):(r(),a("button",{key:0,onClick:E,disabled:o(v),class:"btn btn-success btn-lg w-full"},[y(x,{name:"check",class:"w-5 h-5 mr-2"}),_(" "+i(o(v)?"å‡†å¤‡ä¸­...":"å‡†å¤‡"),1)],8,qt))])),o(I)?(r(),a("div",Dt,[e("button",{onClick:W,disabled:!o(D)||o($),class:"btn btn-primary btn-lg w-full"},[y(x,{name:"play",class:"w-5 h-5 mr-2"}),_(" "+i(o($)?"å¯åŠ¨ä¸­...":"å¼€å§‹æ¸¸æˆ"),1)],8,zt),e("div",Gt,[o(D)?(r(),a("p",Et," âœ… æ‰€æœ‰ç©å®¶å·²å‡†å¤‡ï¼Œå¯ä»¥å¼€å§‹æ¸¸æˆ ")):o(p).length<3?(r(),a("p",Vt," ğŸ‘¥ ç­‰å¾…ç©å®¶åŠ å…¥ ("+i(o(p).length)+"/3) ",1)):(r(),a("p",Kt," â³ ç­‰å¾…å…¶ä»–ç©å®¶å‡†å¤‡ ("+i(o(Q))+"/"+i(o(O))+") ",1)),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500"}," æˆ¿ä¸»æ— éœ€å‡†å¤‡ï¼Œç­‰å¾…å…¶ä»–ç©å®¶å³å¯ ",-1))])])):h("",!0),e("div",At,[e("button",{onClick:V,class:"btn btn-danger w-full"},[y(x,{name:"door-open",class:"w-5 h-5 mr-2"}),t[17]||(t[17]=_(" ç¦»å¼€æˆ¿é—´ ",-1))])])])])])])]),o(w)?(r(),a("div",Ft,[e("div",Ot,[e("div",Qt,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold"},"åˆ†äº«æˆ¿é—´",-1)),e("button",{onClick:t[1]||(t[1]=k=>w.value=!1),class:"text-gray-400 hover:text-gray-600"},[y(x,{name:"x",class:"w-5 h-5"})])]),e("div",Jt,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"æˆ¿é—´é“¾æ¥",-1)),e("div",Wt,[e("input",{value:o(g),readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md text-sm bg-gray-50"},null,8,Xt),e("button",{onClick:se,class:"px-3 py-2 bg-blue-500 text-white rounded-r-md hover:bg-blue-600 text-sm"}," å¤åˆ¶ ")])]),e("div",Yt,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"æ‰«ç åŠ å…¥",-1)),e("div",Zt,[e("div",{ref_key:"qrCodeRef",ref:u,class:"w-32 h-32 flex items-center justify-center bg-gray-100 rounded"},[...t[21]||(t[21]=[e("span",{class:"text-xs text-gray-500"},"äºŒç»´ç åŠ è½½ä¸­...",-1)])],512)])]),t[23]||(t[23]=e("div",{class:"text-sm text-gray-600 bg-blue-50 p-3 rounded"},[e("p",{class:"font-medium mb-1"},"ğŸ“± ä½¿ç”¨æ–¹æ³•ï¼š"),e("ul",{class:"space-y-1 text-xs"},[e("li",null,"â€¢ å¤åˆ¶é“¾æ¥å‘é€ç»™å¥½å‹"),e("li",null,"â€¢ æˆ–è®©å¥½å‹æ‰«æäºŒç»´ç "),e("li",null,"â€¢ å¥½å‹ç‚¹å‡»é“¾æ¥å³å¯åŠ å…¥æˆ¿é—´")])],-1))]),e("div",es,[e("button",{onClick:t[2]||(t[2]=k=>w.value=!1),class:"btn btn-primary"}," å®Œæˆ ")])])])):h("",!0)])}}});export{os as default};
