import{d as R,r as h,k as S,o as V,y as p,z as u,A as e,G as w,J as j,K as P,I as A,H as s,C as i,B as c,M as N,E as x,_ as L,N as X,V as Y,W as ee,X as te,R as T,L as se,Q as oe,Y as ne,Z as ae,$ as re,a0 as le,a1 as ie,q as G,a2 as ce}from"#entry";import{_ as de,a as me}from"./DedoRHNS.js";const ue={class:"space-y-4"},ge={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},fe=["onClick"],pe={class:"flex items-center justify-between mb-2"},xe={class:"font-semibold text-gray-900"},ve={class:"text-sm text-gray-600 mb-3"},ye={class:"flex items-center space-x-1"},_e={class:"flex space-x-1"},be={class:"flex flex-wrap gap-1 mt-2"},he={class:"text-center pt-2"},we=["disabled"],$e={key:0,class:"bg-gray-50 rounded-lg p-4"},ke={class:"font-medium text-gray-900 mb-2 flex items-center"},Ce={class:"space-y-2 text-sm text-gray-600"},Ie={class:"flex justify-between"},Se={class:"flex justify-between"},Ae={class:"flex justify-between"},Re={class:"flex justify-between"},Ne={class:"mt-3 p-2 bg-blue-50 rounded border-l-4 border-blue-400"},De={class:"text-sm text-blue-700"},je=R({__name:"AIDifficultySelector",emits:["start-game"],setup(D,{emit:l}){const a=l,o=h(null),r=h(!1),g=[{level:"easy",name:"简单",description:"适合新手玩家，AI会犯一些小错误",icon:"user",stars:2,color:"bg-green-500",features:["基础策略","反应较慢","偶有失误"],reactionTime:"2-4秒",strategy:"基础",memory:"一般",winRate:"玩家胜率 70%+",recommendation:"推荐给刚接触斗地主的新手玩家，可以轻松上手"},{level:"normal",name:"普通",description:"平衡的AI对手，提供有挑战性的游戏体验",icon:"users",stars:3,color:"bg-blue-500",features:["平衡策略","正常反应","偶尔配合"],reactionTime:"1-2秒",strategy:"中等",memory:"良好",winRate:"玩家胜率 50%",recommendation:"适合有一定经验的玩家，提供公平的对战体验"},{level:"hard",name:"困难",description:"高智能AI，会使用高级策略和完美配合",icon:"robot",stars:5,color:"bg-red-500",features:["高级策略","快速反应","完美配合","记牌精准"],reactionTime:"0.5-1秒",strategy:"高级",memory:"完美",winRate:"玩家胜率 30%",recommendation:"挑战高手玩家，AI会使用最优策略，需要很强的技巧才能获胜"}],m=S(()=>g.find(v=>v.level===o.value)||null),$=v=>{o.value=v},k=async()=>{if(!(!o.value||r.value)){r.value=!0;try{await new Promise(v=>setTimeout(v,500)),a("start-game",o.value)}catch(v){console.error("启动游戏失败:",v)}finally{r.value=!1}}};return V(()=>{o.value="normal"}),(v,f)=>{const _=N;return u(),p("div",ue,[e("div",ge,[(u(),p(j,null,P(g,y=>e("button",{key:y.level,onClick:b=>$(y.level),class:A(["p-4 rounded-lg border-2 transition-all duration-200 text-left",s(o)===y.level?"border-primary-500 bg-primary-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"])},[e("div",pe,[e("h3",xe,c(y.name),1),i(_,{name:y.icon,class:"w-5 h-5 text-gray-600"},null,8,["name"])]),e("p",ve,c(y.description),1),e("div",ye,[f[0]||(f[0]=e("span",{class:"text-xs text-gray-500"},"难度:",-1)),e("div",_e,[(u(),p(j,null,P(5,b=>e("div",{key:b,class:A(["w-2 h-2 rounded-full",b<=y.stars?y.color:"bg-gray-200"])},null,2)),64))])]),e("div",be,[(u(!0),p(j,null,P(y.features,b=>(u(),p("span",{key:b,class:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full"},c(b),1))),128))])],10,fe)),64))]),e("div",he,[e("button",{onClick:k,disabled:!s(o)||s(r),class:"btn btn-primary btn-lg px-8"},[i(_,{name:s(r)?"spinner":"play",class:A(["w-5 h-5 mr-2",{"animate-spin":s(r)}])},null,8,["name","class"]),x(" "+c(s(r)?"启动中...":"开始游戏"),1)],8,we)]),s(m)?(u(),p("div",$e,[e("h4",ke,[i(_,{name:s(m).icon,class:"w-4 h-4 mr-2"},null,8,["name"]),x(" "+c(s(m).name)+" 难度详情 ",1)]),e("div",Ce,[e("div",Ie,[f[1]||(f[1]=e("span",null,"AI反应速度:",-1)),e("span",null,c(s(m).reactionTime),1)]),e("div",Se,[f[2]||(f[2]=e("span",null,"策略复杂度:",-1)),e("span",null,c(s(m).strategy),1)]),e("div",Ae,[f[3]||(f[3]=e("span",null,"记牌能力:",-1)),e("span",null,c(s(m).memory),1)]),e("div",Re,[f[4]||(f[4]=e("span",null,"胜率预期:",-1)),e("span",null,c(s(m).winRate),1)])]),e("div",Ne,[e("p",De,[i(_,{name:"info",class:"w-4 h-4 inline mr-1"}),x(" "+c(s(m).recommendation),1)])])])):w("",!0)])}}}),Pe=L(je,[["__scopeId","data-v-0bc0c2d4"]]),Te={class:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-3"},Ge={class:"flex items-center"},Me={class:"space-y-2"},Ve={class:"text-center"},Le={class:"room-code text-green-800 bg-green-100"},Be={class:"flex space-x-2"},ze=R({__name:"RoomCreatedInfo",props:{roomCode:{}},emits:["copy-code","share-link"],setup(D){return(l,a)=>{const o=N;return u(),p("div",Te,[e("div",Ge,[i(o,{name:"check-circle",class:"w-5 h-5 text-green-500 mr-2"}),a[2]||(a[2]=e("h3",{class:"text-sm font-medium text-green-800"}," 房间创建成功！ ",-1))]),e("div",Me,[e("div",Ve,[e("div",Le,c(l.roomCode),1)]),e("div",Be,[e("button",{onClick:a[0]||(a[0]=r=>l.$emit("copy-code",l.roomCode)),class:"btn btn-sm btn-success flex-1"},[i(o,{name:"copy",class:"w-4 h-4 mr-1"}),a[3]||(a[3]=x(" 复制房间码 ",-1))]),e("button",{onClick:a[1]||(a[1]=r=>l.$emit("share-link",l.roomCode)),class:"btn btn-sm btn-success flex-1"},[i(o,{name:"share",class:"w-4 h-4 mr-1"}),a[4]||(a[4]=x(" 分享链接 ",-1))])])]),a[5]||(a[5]=e("p",{class:"text-xs text-green-700 text-center"}," 分享房间码给朋友，让他们加入游戏 ",-1))])}}}),Ee={key:0,class:"card"},Ke={class:"card-header"},Ue={class:"text-lg font-semibold text-gray-800 flex items-center"},We={class:"card-body"},Ze={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center"},Fe={class:"stat-item"},Je={class:"text-2xl font-bold text-primary-600"},qe={class:"stat-item"},He={class:"text-2xl font-bold text-green-600"},Oe={class:"stat-item"},Qe={class:"text-2xl font-bold text-blue-600"},Xe={class:"stat-item"},Ye={class:"text-2xl font-bold text-purple-600"},et={key:0,class:"mt-4 text-center text-sm text-gray-500"},tt=R({__name:"GameStats",props:{stats:{}},setup(D){const l=a=>{const r=Date.now()-a,g=Math.floor(r/(1e3*60)),m=Math.floor(r/(1e3*60*60)),$=Math.floor(r/(1e3*60*60*24));return g<1?"刚刚":g<60?`${g}分钟前`:m<24?`${m}小时前`:`${$}天前`};return(a,o)=>{const r=N;return a.stats?(u(),p("div",Ee,[e("div",Ke,[e("h2",Ue,[i(r,{name:"chart-bar",class:"w-5 h-5 mr-2"}),o[0]||(o[0]=x(" 游戏统计 ",-1))])]),e("div",We,[e("div",Ze,[e("div",Fe,[e("div",Je,c(a.stats.totalGames||0),1),o[1]||(o[1]=e("div",{class:"text-sm text-gray-600"},"总局数",-1))]),e("div",qe,[e("div",He,c(a.stats.wins||0),1),o[2]||(o[2]=e("div",{class:"text-sm text-gray-600"},"胜利",-1))]),e("div",Oe,[e("div",Qe,c(a.stats.winRate||0)+"% ",1),o[3]||(o[3]=e("div",{class:"text-sm text-gray-600"},"胜率",-1))]),e("div",Xe,[e("div",Ye,c(a.stats.totalScore||0),1),o[4]||(o[4]=e("div",{class:"text-sm text-gray-600"},"总积分",-1))])]),a.stats.lastPlayed?(u(),p("div",et," 上次游戏: "+c(l(a.stats.lastPlayed)),1)):w("",!0)])])):w("",!0)}}}),st=L(tt,[["__scopeId","data-v-4fae7f37"]]),ot={class:"min-h-screen flex flex-col"},nt={class:"relative text-center py-8"},at={class:"absolute top-4 right-4 flex items-center space-x-4"},rt={class:"flex items-center space-x-3 bg-white rounded-lg shadow-md px-4 py-2"},lt={class:"text-sm"},it={class:"font-medium text-gray-900"},ct={class:"flex-1 flex items-center justify-center px-4"},dt={class:"w-full max-w-2xl space-y-8"},mt={class:"card"},ut={class:"card-header"},gt={class:"text-xl font-semibold text-gray-800 flex items-center"},ft={class:"card-body"},pt={class:"card"},xt={class:"card-header"},vt={class:"text-xl font-semibold text-gray-800 flex items-center"},yt={class:"card-body space-y-6"},_t={class:"space-y-3"},bt=["disabled"],ht={class:"space-y-3"},wt={class:"flex space-x-3"},$t=["disabled"],kt={class:"text-sm text-gray-500 space-y-1"},Ct={class:"flex items-center"},It={class:"flex items-center"},St={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},At={class:"flex items-center justify-between p-6 border-b border-gray-200"},Rt={class:"p-6"},jt=R({__name:"index",setup(D){const l=X(),a=Y();ee();const o=h(""),r=h(!1),g=h(!1),m=h(""),$=h(!1),k=h(!1),v=S(()=>o.value.length===6&&/^[A-Z0-9]{6}$/.test(o.value)),f=S(()=>l.playerStats),_=S(()=>l.playerName),y=S(()=>!1),b=async n=>{try{await l.startAIGame(n),await G("/game")}catch(t){console.error("启动AI游戏失败:",t),l.showNotification({type:"error",title:"启动失败",message:"无法启动AI游戏，请重试"})}},B=async()=>{if(!r.value){r.value=!0;try{const n=await a.createRoom();m.value=n,l.showNotification({type:"success",title:"房间创建成功",message:`房间码: ${n}`}),await G(`/room/${n}`)}catch(n){console.error("创建房间失败:",n),l.showNotification({type:"error",title:"创建失败",message:"无法创建房间，请检查网络连接"})}finally{r.value=!1}}},M=async()=>{if(!(!v.value||g.value)){g.value=!0;try{await a.joinRoom(o.value),await G(`/room/${o.value}`)}catch(n){console.error("加入房间失败:",n),l.showNotification({type:"error",title:"加入失败",message:"房间不存在或已满员，请检查房间码"})}finally{g.value=!1}}},z=n=>{const t=n.target;t.value=t.value.toUpperCase().replace(/[^A-Z0-9]/g,""),o.value=t.value},E=n=>{if(!n)return"?";const t=n.trim();return/^[\u4e00-\u9fa5]/.test(t)?t.charAt(t.length-1):t.charAt(0).toUpperCase()},K=n=>{if(!n)return"#6b7280";let t=0;for(let I=0;I<n.length;I++)t=n.charCodeAt(I)+((t<<5)-t);const d=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)","linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)","linear-gradient(135deg, #ff8a80 0%, #ea6100 100%)","linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)"];return d[Math.abs(t)%d.length]},U=n=>{k.value=!1,console.log("玩家名称已保存:",n)},W=n=>{console.log("设置已保存:",n)},Z=async()=>{try{const{getDeviceInfo:n}=await ce(async()=>{const{getDeviceInfo:d}=await import("./BvpZXrTE.js");return{getDeviceInfo:d}},[],import.meta.url),t=await n();l.showNotification({type:"info",title:"设备信息",message:`设备ID: ${t.deviceId}`,duration:5e3}),console.log("设备信息:",t)}catch(n){console.error("获取设备信息失败:",n)}},F=async n=>{try{await navigator.clipboard.writeText(n),l.showNotification({type:"success",title:"复制成功",message:"房间码已复制到剪贴板"})}catch(t){console.error("复制失败:",t)}},J=async n=>{const t=`${window.location.origin}/room/${n}`;if(navigator.share)try{await navigator.share({title:"斗地主游戏邀请",text:`来和我一起玩斗地主吧！房间码: ${n}`,url:t})}catch{}else try{await navigator.clipboard.writeText(t),l.showNotification({type:"success",title:"链接已复制",message:"房间链接已复制到剪贴板"})}catch(d){console.error("复制链接失败:",d)}};return V(()=>{}),te({title:"斗地主网游 - 游戏大厅",description:"选择AI对战或创建房间与朋友联机，享受经典斗地主游戏",keywords:"斗地主,在线游戏,AI对战,朋友联机"}),(n,t)=>{const d=N,I=Pe,q=ze,H=st,O=de,Q=me;return u(),p("div",ot,[e("header",nt,[e("div",at,[e("div",rt,[e("div",{class:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg cursor-pointer",style:se({background:K(s(_))}),onClick:t[0]||(t[0]=C=>k.value=!0),title:"点击修改名称"},c(E(s(_))),5),e("div",lt,[e("div",it,c(s(_)),1),t[6]||(t[6]=e("div",{class:"text-xs text-gray-500"},"点击头像修改",-1))])]),e("button",{onClick:t[1]||(t[1]=C=>$.value=!0),class:"p-2 bg-white rounded-lg shadow-md hover:bg-gray-50 transition-colors",title:"游戏设置"},[i(d,{name:"settings",class:"w-5 h-5 text-gray-600"})]),s(y)?(u(),p("button",{key:0,onClick:Z,class:"p-2 bg-white rounded-lg shadow-md hover:bg-gray-50 transition-colors",title:"设备信息"},[i(d,{name:"info",class:"w-5 h-5 text-gray-600"})])):w("",!0)]),t[7]||(t[7]=e("h1",{class:"text-4xl md:text-6xl font-bold text-gray-800 mb-2"}," 🎮 斗地主网游 ",-1)),t[8]||(t[8]=e("p",{class:"text-lg text-gray-600"}," 轻量化在线斗地主，支持AI对战和好友联机 ",-1))]),e("main",ct,[e("div",dt,[e("div",mt,[e("div",ut,[e("h2",gt,[i(d,{name:"robot",class:"w-6 h-6 mr-2"}),t[9]||(t[9]=x(" 🤖 本地AI对战 ",-1))])]),e("div",ft,[t[10]||(t[10]=e("p",{class:"text-gray-600 mb-4"}," 与智能AI进行斗地主对战，无需网络连接 ",-1)),i(I,{onStartGame:b})])]),e("div",pt,[e("div",xt,[e("h2",vt,[i(d,{name:"users",class:"w-6 h-6 mr-2"}),t[11]||(t[11]=x(" 👥 联机对战 ",-1))])]),e("div",yt,[t[14]||(t[14]=e("p",{class:"text-gray-600"}," 与朋友一起游戏，支持局域网和互联网连接 ",-1)),e("div",_t,[e("button",{onClick:B,disabled:s(r),class:"btn btn-primary btn-lg w-full flex items-center justify-center"},[i(d,{name:s(r)?"spinner":"plus",class:A(["w-5 h-5 mr-2",{"animate-spin":s(r)}])},null,8,["name","class"]),x(" "+c(s(r)?"创建中...":"创建房间"),1)],8,bt),s(m)?(u(),T(q,{key:0,"room-code":s(m),onCopyCode:F,onShareLink:J},null,8,["room-code"])):w("",!0)]),t[15]||(t[15]=oe('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">或</span></div></div>',1)),e("div",ht,[e("div",wt,[ne(e("input",{"onUpdate:modelValue":t[2]||(t[2]=C=>le(o)?o.value=C:null),type:"text",placeholder:"输入6位房间码",maxlength:"6",class:"input flex-1 text-center text-lg font-mono uppercase",onInput:z,onKeyup:re(M,["enter"])},null,544),[[ae,s(o)]]),e("button",{onClick:M,disabled:!s(v)||s(g),class:"btn btn-primary px-6 flex items-center"},[i(d,{name:s(g)?"spinner":"arrow-right",class:A(["w-5 h-5",{"animate-spin":s(g)}])},null,8,["name","class"])],8,$t)]),e("div",kt,[e("p",Ct,[i(d,{name:"wifi",class:"w-4 h-4 mr-1 text-green-500"}),t[12]||(t[12]=x(" 同一WiFi: 低延迟，速度快 ",-1))]),e("p",It,[i(d,{name:"globe",class:"w-4 h-4 mr-1 text-blue-500"}),t[13]||(t[13]=x(" 跨网络: 支持任意网络环境 ",-1))])])])])]),s(f)?(u(),T(H,{key:0,stats:s(f)},null,8,["stats"])):w("",!0)])]),t[17]||(t[17]=e("footer",{class:"text-center py-6 text-sm text-gray-500"},[e("p",null,[x(" 基于WebRTC技术，支持P2P直连 • "),e("a",{href:"https://github.com/your-repo",target:"_blank",class:"text-primary-600 hover:text-primary-700"}," 开源项目 ")])],-1)),s($)?(u(),T(O,{key:0,onClose:t[3]||(t[3]=C=>$.value=!1),onSave:W})):w("",!0),s(k)?(u(),p("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[5]||(t[5]=ie(C=>k.value=!1,["self"]))},[e("div",St,[e("div",At,[t[16]||(t[16]=e("h2",{class:"text-lg font-semibold text-gray-900"},"修改玩家名称",-1)),e("button",{onClick:t[4]||(t[4]=C=>k.value=!1),class:"p-1 hover:bg-gray-100 rounded transition-colors"},[i(d,{name:"x",class:"w-5 h-5"})])]),e("div",Rt,[i(Q,{"current-name":s(_),onSave:U},null,8,["current-name"])])])])):w("",!0)])}}});export{jt as default};
